A lot of data is inherently location-based and this trend is increasing.  

- Any data that is county, state, country, city, etc. is tied to a geographic location on the ground

- Addresses

- Photos

- Businesses

- Satelite imagery



In order to unlock the full power of this data or to visualize it, we need to really treat it as geographic data.  



Sometimes it's important to do things like:

- Test if an address is within a county

- Aggregate data

- Figure out distances between points





**This lecture will cover:**

- using maps to display data

- other operations on geographic data
# A few mapping basics

**Projections:**  

There are a lot of different projections that are used.  A projection refers to the process used to convert points on the earth (more or less a sphere) to a flat surface like a map or computer monitor.



(This is largely beyond our scope here, but it is can be very important to pay attention to if one is going to do a lot with GIS data.)





**Latitude** is degrees north or south of the equator.  (-90 to 90) Lines of latitude are parallel.



**Longitude** is degrees east or west of the prime meridian (-180 to 180).  Lines of longitude converge at the poles (not parallel).
# Libraries for mapping in Python

There are several choices for libraries for creating maps.  A few of them include:

- matplotblib- basemap - [Geographic Data with Basemap - Python Data Science Handbook](https://github.com/jakevdp/PythonDataScienceHandbook/blob/master/notebooks/04.13-Geographic-Data-With-Basemap.ipynb)

- Plotly Express - https://plotly.com/python/maps/



- [Altair](https://altair-viz.github.io/gallery/index.html#maps) - Another diverse plotting library that includes some mapping options

- [Folium](https://python-visualization.github.io/folium/) - Specifically for mapping- powerful, interactive maps based on leaflet.js

  
# COVID Data



**Choropleth** is really just a fancy name for a color-coded map where the color indicates something like population density or the number of positive covid cases.





Make request for the data.
Turn data into data frame and take a peek.
See how many entries we have.
We have an entry for every day for every state and we just want the most recent data.
Dates are currently strings.  We need to turn them into DateTime objects.
Now we have it as a Timestamp
Grab the latest data they do have which is March 7th, 2021.
## Choropleth Map
## Choropleth with Animation
Now let's look at April 2020.
# ABQ Police Incidents
- [APD ArcGIS REST service](https://coagisweb.cabq.gov/arcgis/rest/services/public/APD_Incidents/MapServer/0/query)

- [APD ArcGIS REST Docs](https://coagisweb.cabq.gov/arcgis/sdk/rest/index.html#//02ss0000000r000000)

Import data and take a look at it.
Take a look at one entry
Turn our data into a dataframe and drop NAs.
Extract data into separate columns.
## Scatter Mapbox
'open-street-map'`,

    `'white-bg'`, `'carto-positron'`, `'carto-darkmatter'`, `'stamen-

    terrain'`, `'stamen-toner'`, `'stamen-watercolor'
## Heatmap
## Census Tracts & Crime
Census tracts from: https://github.com/arcee123/GIS_GEOJSON_CENSUS_TRACTS
See if a point is inside a tract polygon
Find the centroid
Pull out lat or long for a point
Distance between points
Count the number of loud party incidents in each tract
Keep tracks that have had at least one incident
